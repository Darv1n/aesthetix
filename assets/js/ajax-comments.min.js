jQuery(document).ready(function(o){function i(){o.each({comment:"",comment_parent:"0",comment_id:"",comment_action:""},function(n,t){0<o("#commentform").find('[name="'+n+'"]').length&&("comment"===n?o("#commentform").find('[name="'+n+'"]').text(t):o("#commentform").find('[name="'+n+'"]').val(t))})}function c(){i();var n=o("#respond");o("#comments").append(n.prop("outerHTML")),n.remove()}o("#comments").on("click",".comment-confirmation-resend",function(n){var t=o(this);comment_id=o(this).data("comment-id"),t.hasClass("diactive")||o.ajax({type:"POST",url:ajax_obj.url,data:{action:"comments_confirmation_resend_action","comment-id":comment_id,nonce:ajax_obj.nonce},beforeSend:function(){t.addClass("diactive")},complete:function(){notificationButton(),setTimeout(function(){t.removeClass("diactive")},2e4)},success:function(n){n.success?t.closest(".comment").find(".comment-notifications").append('<div class="notification notification_accept">'+n.data+"</div>"):t.closest(".comment").find(".comment-notifications").append('<div class="notification notification_alert">'+n.data+"</div>")}}),n.preventDefault()}),o("#comments").on("click",".comment-reply-link",function(n){i();var t=o(this).closest(".comment");comment_id=o(this).data("commentid"),o("#cancel-comment-reply-link").css("display","inline"),o("#commentform").find('[name="comment_parent"]').val(comment_id);var e=o("#respond");t.after(e.prop("outerHTML")),e.remove(),n.preventDefault()}),o("#comments").on("click",".comment-edit-link",function(n){i();var t=o(this).closest(".comment");comment_id=o(this).data("commentid"),comment_text=t.find(".comment-content").html().trim(),o("#cancel-comment-reply-link").css("display","inline");var e=o("#respond");e.find('[name="comment"]').text(comment_text),e.find('[name="comment_id"]').val(comment_id),e.find('[name="comment_action"]').val("edit"),t.after(e.prop("outerHTML")),e.remove(),n.preventDefault()}),o("#comments").on("click",".comment-delete-link",function(n){var e=o("#commentform");comment_id=o(this).data("commentid"),e.find('[name="comment"]').text("delete"),e.find('[name="comment_id"]').val(comment_id),e.find('[name="comment_action"]').val("delete"),o.ajax({type:"POST",url:ajax_obj.url,data:{action:"comments_action",query:e.serialize(),nonce:ajax_obj.nonce},beforeSend:function(){},complete:function(){e.trigger("reset"),notificationButton(),c()},success:function(n){n.success?o("#comment-"+comment_id).find(".comment-content").html(n.data).addClass("comment-deleted fade-in"):o.each(n.data,function(n,t){0!==t.length&&e.find('[name="'+n+'"]').after('<div class="notification notification_warning">'+t+"</div>")})}}),n.preventDefault()}),o("#comments").on("click","#cancel-comment-reply-link",function(n){o(this).css("display","none"),c(),n.preventDefault()}),o("#comments").on("click","#submit",function(n){var t=o(this);form=o(this).closest("form"),defaultText=t.data("default-text"),processText=t.data("process-text"),comment_id=form.find('[name="comment_id"]').val(),comment_parent_id=form.find('[name="comment_parent"]').val(),comment_action=form.find('[name="comment_action"]').val(),ready=!0,form.find(".notification").remove(),o("#commentform").find("input[required],textarea[required]").each(function(){0===o(this).val().length&&(o(this).after('<div class="notification notification_warning">'+o(this).data("notification")+"</div>"),notificationButton(),ready=!1)}),ready&&!form.hasClass("processing")&&o.ajax({type:"POST",url:ajax_obj.url,data:{action:"comments_action",query:form.serialize(),nonce:ajax_obj.nonce},beforeSend:function(){t.text(processText),form.addClass("processing")},complete:function(){form.trigger("reset").removeClass("processing"),t.text(defaultText),notificationButton(),c()},success:function(n){if(n.success)if(0<comment_action.length&&0<comment_id.length)o("#comment-"+comment_id).find(".comment-content").html(n.data).addClass("fade-in");else if("0"===comment_parent_id)o("#comments > .comment-list").append(n.data);else{var t=o("#comments").find('.comment[data-id="'+comment_parent_id+'"]');children=t.closest(".comment-list-item").find(".children"),0===children.length?t.after('<ol class="children">'+n.data+"</ol>"):children.append(n.data)}else o.each(n.data,function(n,t){0!==t.length&&form.find('[name="'+n+'"]').after('<div class="notification notification_warning">'+t+"</div>")})}}),n.preventDefault()})});